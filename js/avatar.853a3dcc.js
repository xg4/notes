(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["avatar"],{"20d6":function(t,a,e){"use strict";var i=e("5ca1"),n=e("0a49")(6),r="findIndex",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(r)},"4bd4":function(t,a,e){"use strict";var i=e("4d26"),n=e.n(i),r=e("4f16"),s=e.n(r);a["a"]={props:{src:String,size:String},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{url:function(){return this.src||this.$store.state.user.avatar}},methods:{onLoad:function(){this.loading=!1},onError:function(){this.loading=!1,this.error=!0},renderPlaceholder:function(){var t=this.$createElement;return this.loading?t("div",{class:s.a.loading},[t("i",{class:n()("x-icon x-icon-img",s.a.icon)})]):this.error?t("div",{class:s.a.error},[t("i",{class:n()("x-icon x-icon-img-fail",s.a.icon)})]):void 0}},render:function(){var t=arguments[0];return t("div",{class:n()(s.a.avatar,s.a[this.size])},[this.renderPlaceholder(),t("transition",{attrs:{name:"animate-fade"}},[t("img",{directives:[{name:"show",value:!this.error}],attrs:{src:this.url},on:{load:this.onLoad,error:this.onError}})])])}}},"4f16":function(t,a,e){t.exports={avatar:"index-module_avatar_2tQ_M",mini:"index-module_mini_3Xx2a",icon:"index-module_icon_3B6sM",sm:"index-module_sm_1nsGH",lg:"index-module_lg_2k_pX",loading:"index-module_loading_1BYTB",error:"index-module_error_3HMDB"}},"9e91":function(t,a,e){t.exports={wrap:"avatar-module_wrap_cLh4G",avatar:"avatar-module_avatar_11JjA",form:"avatar-module_form_3oXf3",group:"avatar-module_group_1bC-x",btn:"avatar-module_btn_1c0zR"}},a052:function(t,a,e){"use strict";e.r(a);var i=e("768b"),n=(e("ac6a"),e("ffc1"),e("20d6"),e("9e91")),r=e.n(n),s=e("4bd4"),o=e("ed08"),c=o["a"].THEME_MAP;a["default"]={created:function(){this.ava=new o["a"](this.$store.state.user.avatar),this.theme=this.ava.formatByQuery()},data:function(){return{showPicker:!1,active:null,activeIndex:0,ava:{},theme:{},url:""}},watch:{showPicker:function(t){t||this.$refs.picker.setColumnIndex(0,this.activeIndex)}},computed:{list:function(){var t=c[this.active];return t?t.data:[]}},methods:{handleToggle:function(t){var a=this;this.active=t,this.activeIndex=this.list.findIndex((function(t){var e=t.value;return a.theme[a.active]&&e===a.theme[a.active].value})),this.showPicker=!this.showPicker},handleConfirm:function(t){this.theme[this.active]=t,this.url=this.ava.create(this.theme),this.showPicker=!1},handleCancel:function(){this.showPicker=!1},handleBack:function(){this.$router.back()},handleSubmit:function(){this.$store.dispatch("user/put",{avatar:this.url}),this.$notify({message:"修改成功",duration:1500,background:"#1989fa"}),this.$router.back()}},render:function(){var t=this,a=arguments[0];return a("div",{class:r.a.wrap},[a("div",{class:r.a.avatar},[a(s["a"],{attrs:{size:"lg",src:this.url||this.$store.state.user.avatar}})]),a("van-cell-group",{class:r.a.form},[Object.entries(c).map((function(e){var n=Object(i["a"])(e,2),r=n[0],s=n[1];return a("van-cell",{on:{click:function(){t.handleToggle(r)}},attrs:{title:s.title,value:t.theme[r]&&t.theme[r].text,isLink:!0},key:r})}))]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.showPicker,callback:function(a){t.showPicker=a}}},[a("van-picker",{ref:"picker",attrs:{showToolbar:!0,defaultIndex:this.activeIndex,columns:this.list},on:{confirm:this.handleConfirm,cancel:this.handleCancel}})]),a("div",{class:r.a.group},[a("van-button",{on:{click:this.handleSubmit},class:r.a.btn,attrs:{type:"info",size:"large"}},["保存"]),a("van-button",{on:{click:this.handleBack},class:r.a.btn,attrs:{size:"large"}},["取消"])])])}}}}]);